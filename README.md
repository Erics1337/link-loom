# Link Loom

Link Loom is an intelligent bookmark organization tool that uses AI to cluster and categorize your chaotic browser bookmarks into a structured, easy-to-navigate hierarchy.

## ğŸš€ Features

- **AI-Powered Clustering**: Automatically analyzes your bookmarks and groups them by topic using K-Means clustering and OpenAI embeddings.
- **Smart Organization**: Creates a logical folder structure for your links.
- **Chrome Extension**: A user-friendly browser extension to manage the weaving process.
  - **Visual Progress**: Real-time feedback on the organization process.
  - **Preview**: View the proposed structure before applying changes.
  - **Dark/Light Mode**: Premium design with frosted glass effects.
- **Modern Stack**: Built with a robust monorepo architecture.

## ğŸ› ï¸ Tech Stack

This project is a monorepo managed by [Turborepo](https://turbo.build/repo) and [pnpm](https://pnpm.io/).

### Apps

- **`apps/extension`**: Chrome Extension built with React, Vite, and CRXJS.
- **`apps/backend`**: Fastify API for bookmark ingestion, embedding (OpenAI), and clustering (ml-kmeans). Uses Supabase (Postgres) for storage and BullMQ/Redis for job queues.
- **`apps/web`**: Next.js application (Marketing/Dashboard).

### Packages

- **`packages/ui`**: Shared UI components.
- **`packages/tsconfig`**: Shared TypeScript configurations.
- **`packages/shared`**: Shared utilities and types.

## ğŸ“‹ Prerequisites

- **Node.js** (>= 18)
- **pnpm** (>= 8)
- **Docker** (for local Supabase and Redis)
- **Supabase CLI**
- **OpenAI API Key**

## ğŸ Getting Started

1.  **Clone the repository**

    ```bash
    git clone <repo-url>
    cd link-loom
    ```

2.  **Install dependencies**

    ```bash
    pnpm install
    ```

3.  **Environment Setup**
    - Copy `.env.example` to `.env` in `apps/backend` and configure your keys:
      - `DATABASE_URL` (Supabase)
      - `OPENAI_API_KEY`
      - `REDIS_URL`

4.  **Start Infrastructure**
    - Ensure Docker is running.
    - Start Supabase (if local): `npx supabase start`
    - Start Redis (if not using Supabase's or external): `docker-compose up -d` (if applicable)

5.  **Run Development Server**

    ```bash
    pnpm dev
    ```

    This command starts all applications in parallel using Turbo.

6.  **Stripe Local Development**
    To test premium features locally, you need to forward Stripe webhooks to your local environment.
    - Install the [Stripe CLI](https://docs.stripe.com/stripe-cli).
    - Log in to your Stripe account:
      ```bash
      stripe login
      ```
    - Start forwarding webhook events to your local Next.js API:
      ```bash
      stripe listen --forward-to localhost:3000/api/webhooks/stripe
      ```
    - Copy the generated webhook secret (`whsec_...`) and add it to your `apps/web/.env.local` as `STRIPE_WEBHOOK_SECRET`.

## ğŸ§© Extension Development

To load the extension in Chrome:

1.  Run the build or dev command:

    ```bash
    # For watching changes
    pnpm dev

    # OR build once
    pnpm build
    ```

2.  Open Chrome and navigate to `chrome://extensions/`.
3.  Enable **Developer mode** (top right).
4.  Click **Load unpacked**.
5.  Select the **`apps/extension/dist`** folder.

> **Note**: Do not load the `apps/extension` root folder; you must load the `dist` folder generated by the build.

## ğŸ—ï¸ Project Structure

```
link-loom/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ backend/    # Fastify API & Job Workers
â”‚   â”œâ”€â”€ extension/  # Chrome Extension (React/Vite)
â”‚   â””â”€â”€ web/        # Next.js Frontend
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ tsconfig/   # Shared TS Config
â”‚   â”œâ”€â”€ ui/         # Shared Components
â”‚   â””â”€â”€ shared/     # Shared Logic
â”œâ”€â”€ turbo.json      # Turborepo Config
â””â”€â”€ package.json    # Root Config
```

## ğŸ“œ Scripts

- `pnpm build`: Build all apps and packages.
- `pnpm dev`: Start all apps in development mode.
- `pnpm lint`: Lint all code.
- `pnpm format`: Format code with Prettier.
